# Learning Log ‚Äî Phaser, Games, Networking & Cloudflare

## Goal
Build interactive **animations and games** (e.g. Galton board, Pong) using **Phaser**, optionally embedded in a **React app**, deployable on **Cloudflare Pages**, with support for **local network multiplayer** using a backend.

---

## 1. JSXGraph vs Phaser

### JSXGraph
- Excellent for **formal math visualization**
- Precise axes, labels, formulas
- Not suitable for:
  - Many moving objects
  - Collisions
  - Games

### Phaser
- Full **2D game framework**
- Handles:
  - Game loop
  - Rendering (Canvas/WebGL)
  - Input (keyboard, mouse, touch)
  - Animations
  - Physics
- Best choice for:
  - Games
  - Animated simulations
  - Educational interactive demos

üëâ Phaser is the **web equivalent of Pygame**.

---

## 2. Physics in Phaser

Phaser offers **two main physics systems**:

### Arcade Physics
- Simple, fast, deterministic
- Rectangle / circle collisions
- No rotation physics
- Perfect for:
  - Pong
  - Breakout
  - Platformers
  - Arcade-style games

### Matter Physics (Matter.js inside Phaser)
- Real rigid-body physics
- Rotation, mass, friction, restitution
- Best for:
  - Galton board with pegs
  - Pinball
  - Physics simulations

---

## 3. Galton Board ‚Äî Two Approaches

### A. Physical Galton Board (Peg collisions)
- Phaser + Matter Physics
- Real collisions
- Fewer balls (‚âà 50‚Äì200)
- Visually realistic

### B. Bernoulli / Random Walk Galton Board (Recommended for teaching)
- No physics engine
- Each ball makes left/right choices
- Animate step-by-step using tweens
- Thousands of balls possible
- Much clearer pedagogically

üëâ **Bernoulli simulation + Phaser alone is enough**  
üëâ JSXGraph is optional (only for formal math overlays)

---

## 4. Phaser + React

Phaser integrates **very well** with React if responsibilities are separated.

### Rule
> React owns the UI. Phaser owns the canvas.

### Pattern
- React component mounts Phaser **once**
- Phaser runs imperatively inside a `<div>`
- React controls:
  - Buttons
  - Sliders
  - Routing
- Phaser controls:
  - Animation
  - Physics
  - Game logic

### Communication
- Use refs / events
- Do NOT put Phaser state in React state

---

## 5. React Router + One App, Many Games

You can put **all games and animations in one React app**.

Example routes:
- `/galton-bernoulli`
- `/galton-physics`
- `/pong`
- `/random-walk`

Direct external links work:

https://your-site.pages.dev/galton-bernoulli

Each route mounts its own Phaser scene.

---

## 6. Cloudflare Pages

Cloudflare Pages is a **very good option** for this setup.

### Works well for:
- React
- Phaser
- Static builds
- Educational tools
- Games & simulations

### Required for React Router
Create a `_redirects` file:

/* /index.html 200

---

## 7. Animation/Game Catalog for Students

Students **do not browse files** directly.

You provide:
- A React ‚ÄúHome‚Äù page
- A list/grid of animations
- Each entry links to a route

This lets students:
- Pick the right animation
- Bookmark/share links
- Access directly from LMS / QR codes

---

## 8. Multiplayer (2-Player Pong)

### Phaser alone is NOT enough
You need a backend for networking.

---

## 9. Backend Choices

### Option A ‚Äî Local Network (LAN, offline)
**Recommended for classroom / router-only setup**

- Backend runs on **your PC**
- Clients connect over LAN Wi-Fi
- No internet required

#### Backend options
- **FastAPI + WebSockets** ‚úÖ
- Node.js + WebSockets

FastAPI is:
- Clean
- Async
- Reliable
- More than fast enough for Pong

### Architecture
- Server is **authoritative**
- Clients send only input (up/down)
- Server simulates:
  - Ball
  - Paddles
  - Score
- Server broadcasts state snapshots

---

## 10. FastAPI + WebSockets (Conclusion)

FastAPI WebSockets:
- Work well
- Stable for LAN games
- Perfect for 2-player Pong
- Easy to extend later (lobby, scores, admin)

Key rules:
- Use an async game loop
- Never block the event loop
- Keep server authoritative

---

## 11. Cloudflare Workers Alternative

Possible but different use case.

### Cloudflare Workers + Durable Objects
- Internet required
- Good for remote play
- WebSocket support via Durable Objects
- Costs & complexity higher

### Recommendation
- **LAN-only** ‚Üí FastAPI on your PC
- **Internet multiplayer** ‚Üí Cloudflare Workers + Durable Objects

---

## Final Stack (Recommended)

### For your learning & teaching goals
- **Phaser** ‚Üí animations & games
- **Bernoulli simulation** ‚Üí Galton board
- **React** ‚Üí UI & routing
- **Cloudflare Pages** ‚Üí hosting
- **FastAPI + WebSockets (LAN)** ‚Üí multiplayer

This stack is:
- Clean
- Modern
- Educational
- Scalable
- Fun üòÑ

---