# Learning Log — January 26, 2026

## Topics
- Responsive strategy decisions for a JSXGraph-based React page
- React effect dependencies and lint warnings
- Cloudflare Pages deployment with Wrangler
- SPA routing and direct URL access
- i18n (i18next + react-i18next) and language persistence
- React Router routes and client-side navigation

## Key takeaways
- For an SPA, direct navigation to routes like `/vectors` needs a server fallback to `index.html`.
- In Cloudflare Pages, a `_redirects` file with `/* /index.html 200` enables SPA routing.
- `wrangler.toml` can define the Pages build output: `pages_build_output_dir = "./dist"`.
- `wrangler pages deploy` uses the output dir from `wrangler.toml` if no directory is passed.
- React `useEffect` should include all referenced values in the dependency array.
- When keeping an unused config value, a tiny no-op use (e.g. `void fontSmall`) avoids lint noise.
- A centralized config with a scale factor keeps SVG/JSXGraph sizes consistent across the app.
- Converting pixel offsets to board units (`px / unitX`) keeps labels visually stable as the board resizes.
- `ResizeObserver` is the clean way to keep a square canvas; `window.resize` works as a fallback.
- For JSXGraph, call `resizeContainer()` + `update()` after the DOM size is known to preserve a 1:1 board.
- `matchMedia` + `change` listener is a clean way to gate a desktop-only UI.
- `i18next` can persist language in `localStorage` and set `document.lang`/`dir` for RTL languages.

## i18n (how it works)
- `i18n.js` initializes i18next and wires React via `initReactI18next`.
- The language is loaded from `localStorage` (key: `pc_language`), defaults to French if missing.
- On language change, we update:
  - `document.documentElement.lang` for accessibility/SEO.
  - `document.documentElement.dir` for RTL support (Arabic).
  - `localStorage` for persistence across reloads.
- Translations live in JSON files (e.g. `src/locales/fr.json`, `en.json`).

### i18n examples
```jsx
// Component usage
import { useTranslation } from 'react-i18next'

function Title() {
  const { t } = useTranslation()
  return <h1>{t('vectors.title')}</h1>
}
```

```jsx
// Language switch
const { i18n } = useTranslation()
<select value={i18n.language} onChange={(e) => i18n.changeLanguage(e.target.value)}>
  <option value="fr">Français</option>
  <option value="en">English</option>
</select>
```

## React Router (routes + direct access)
- Routes are client-side; the server still only serves `index.html`.
- When the URL changes (e.g. `/vectors`), React Router renders the matching component.
- Directly typing `/vectors` in the browser needs a server fallback to `index.html`
  so the client router can take over.

### Routing examples
```jsx
// App.jsx (example)
import { Routes, Route } from 'react-router-dom'
import Home from './pages/Home'
import Vectors from './pages/Vectors'

<Routes>
  <Route path="/" element={<Home />} />
  <Route path="/vectors" element={<Vectors />} />
</Routes>
```

```jsx
// Navigation
import { Link } from 'react-router-dom'
<Link to="/vectors">Vectors</Link>
```

## Commands used
```bash
npm run build
wrangler login
wrangler pages project create paul-craft-react
wrangler pages deploy
```

## Files added/updated
- `wrangler.toml`
- `public/_redirects`
