# Learning Log — Menu du Tire‑Bouchon

Date: January 31, 2026

## Project Structure
- Static site for a restaurant menu, deployed to Cloudflare Pages.
- Content lives under `public/` so Pages can publish everything inside it.
- Each menu/version is in its own folder, e.g.:
  - `public/buffet-2026-01-31-v8/`
  - `public/buffet-2026-01-31-v7/`
- Shared assets are centralized in `public/assets/`:
  - OG image per version: `public/assets/og-buffet-YYYY-MM-DD-vN.jpg`
  - Favicons: `public/assets/favicon.svg`, `favicon-32.png`, `favicon-192.png`, `apple-touch-icon.png`

## Open Graph (WhatsApp / Telegram previews)
- WhatsApp and Telegram use Open Graph tags:
  - `og:title`, `og:description`, `og:type`, `og:image`, `og:url`
  - `og:image:width` and `og:image:height` help preview sizing.
- OG image should be **1200×630** (1.91:1). File size around 50–200 KB is fine.
- WhatsApp caches aggressively:
  - To refresh preview, **change the URL** (new folder/version) **and** use a new OG image filename.
  - Example: `.../buffet-2026-01-31-v8/` + `og-buffet-2026-01-31-v8.jpg`.
- A broken OG image URL (typo) causes **no preview image**.

## Versioning Strategy (WhatsApp cache)
- For each change before sharing on WhatsApp:
  1) duplicate the folder with a new version suffix (vN),
  2) duplicate the OG image with the same version suffix,
  3) update `og:url`, `canonical`, `og:image` in the new `index.html`,
  4) redeploy and share the new URL.

## Cloudflare Pages (CLI)
- Config file: `wrangler.toml`
  - `name = "menu-du-tire-bouchon"`
  - `pages_build_output_dir = "public"`
- Deploy:
  - `wrangler login`
  - `wrangler pages deploy`
- Published URL pattern:
  - `https://menu-du-tire-bouchon.pages.dev/<folder>/`

## Script: Duplicate and Version Menus
- Script: `scripts/duplicate_menu.sh`
- Purpose: copy the latest menu folder, copy OG image, update URLs.
- Usage:
  - Auto pick latest (by modification time) and create next version:
    - `scripts/duplicate_menu.sh`
  - Pick a source explicitly:
    - `scripts/duplicate_menu.sh public/buffet-2026-01-31-v8`
  - Manual target:
    - `scripts/duplicate_menu.sh public/buffet-2026-01-31-v8 public/buffet-2026-01-31-v9`
  - Clean old version after duplication:
    - `scripts/duplicate_menu.sh --clean`
    - Safety: it will not delete if it is the only versioned folder.
- Output:
  - Prints the new shareable URL.

## Click-to-Contact (WhatsApp / Copy)
- WhatsApp Business sometimes blocks `tel:` in the in-app browser.
- Safer approach:
  - Button opens chat: `https://wa.me/<number>`
  - Button copies number to clipboard (works across apps).
- The copy button keeps the number visible after copy to avoid confusion.

## Favicon
- Use both SVG and PNG for compatibility:
  - `favicon.svg` for modern browsers.
  - `favicon-32.png`, `favicon-192.png`, `apple-touch-icon.png` for broader support.

## Git Ignore
- `.gitignore` includes:
  - `.wrangler/`, `node_modules/`, `dist/`, `.DS_Store`, `.vscode/`
